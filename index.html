<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2299.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Helvetica Neue'}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Alchemer Roster&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; max-width: 760px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>h1 { margin: 0 0 8px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin: 12px 0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.muted { color: #666; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button { cursor: pointer; padding: 8px 12px; border-radius: 8px; border: 1px solid #ccc; background: #f8f8f8; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>input[type="text"] { padding: 8px; border: 1px solid #ccc; border-radius: 8px; min-width: 240px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.toggle { display: inline-flex; align-items: center; gap: 8px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.dot { width: 10px; height: 10px; border-radius: 999px; display: inline-block; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.dot.on { background: #2ecc71; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.dot.off { background: #e74c3c; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>table { width: 100%; border-collapse: collapse; margin-top: 8px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>th, td { text-align: left; padding: 8px; border-bottom: 1px solid #eee; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.status { font-weight: 600; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.pill { display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid #eee; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;h1&gt;Alchemer Roster&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;p class="muted"&gt;Add your name and toggle whether you’re currently active on Alchemer.&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="row" style="margin-bottom:10px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;input type="text" id="nameInput" placeholder="Your name" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="saveNameBtn"&gt;Save name&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;span class="muted" id="whoami"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;label class="toggle"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input type="checkbox" id="statusToggle" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;span id="statusLabel"&gt;Alchemer: Logged Out&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;span id="statusDot" class="dot off"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;span class="muted"&gt;Remember to toggle back to “Logged Out” before leaving.&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3 style="margin:0 0 6px;"&gt;Current Roster&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;table&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt;&lt;th&gt;Updated&lt;/th&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;tbody id="rosterBody"&gt;&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;!-- Firebase Web SDK via CDN (no bundlers/tools needed) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script type="module"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";</p>
<p class="p1"><span class="Apple-converted-space">    </span>import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";</p>
<p class="p1"><span class="Apple-converted-space">    </span>import {</p>
<p class="p1"><span class="Apple-converted-space">      </span>getFirestore, doc, getDoc, setDoc, updateDoc, serverTimestamp,</p>
<p class="p1"><span class="Apple-converted-space">      </span>collection, onSnapshot, query, orderBy</p>
<p class="p1"><span class="Apple-converted-space">    </span>} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// ====== REPLACE THIS WITH YOUR CONFIG FROM THE CONSOLE ======</p>
<p class="p3">const firebaseConfig = {</p>
<p class="p3"><span class="Apple-converted-space">  </span>apiKey: "AIzaSyA1ln5FgnXCmuwxCupBy_VaDBaC3jyQC30",</p>
<p class="p3"><span class="Apple-converted-space">  </span>authDomain: "alchemer-status.firebaseapp.com",</p>
<p class="p3"><span class="Apple-converted-space">  </span>databaseURL: "https://alchemer-status-default-rtdb.firebaseio.com",</p>
<p class="p3"><span class="Apple-converted-space">  </span>projectId: "alchemer-status",</p>
<p class="p3"><span class="Apple-converted-space">  </span>storageBucket: "alchemer-status.firebasestorage.app",</p>
<p class="p3"><span class="Apple-converted-space">  </span>messagingSenderId: "566870207856",</p>
<p class="p3"><span class="Apple-converted-space">  </span>appId: "1:566870207856:web:b429110fb25c59916873b5"</p>
<p class="p3">};</p>
<p class="p1"><span class="Apple-converted-space">    </span>// ============================================================</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const app = initializeApp(firebaseConfig);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const auth = getAuth(app);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const db = getFirestore(app);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const nameInput = document.getElementById('nameInput');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const saveNameBtn = document.getElementById('saveNameBtn');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const statusToggle = document.getElementById('statusToggle');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const statusLabel = document.getElementById('statusLabel');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const statusDot <span class="Apple-converted-space">  </span>= document.getElementById('statusDot');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const whoami<span class="Apple-converted-space">      </span>= document.getElementById('whoami');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const rosterBody<span class="Apple-converted-space">  </span>= document.getElementById('rosterBody');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>let uid = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let myDocRef = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let myActive = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const setUIFromDoc = (data) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!data) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (typeof data.name === 'string') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nameInput.value = data.name;</p>
<p class="p1"><span class="Apple-converted-space">        </span>whoami.textContent = data.name ? `Signed in anonymously • You are: ${data.name}` : 'Signed in anonymously';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (typeof data.active === 'boolean') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>myActive = data.active;</p>
<p class="p1"><span class="Apple-converted-space">        </span>statusToggle.checked = myActive;</p>
<p class="p1"><span class="Apple-converted-space">        </span>statusLabel.textContent = myActive ? 'Alchemer: Logged In' : 'Alchemer: Logged Out';</p>
<p class="p1"><span class="Apple-converted-space">        </span>statusDot.className = 'dot ' + (myActive ? 'on' : 'off');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Warn if leaving while still "Logged In"</p>
<p class="p1"><span class="Apple-converted-space">    </span>window.addEventListener('beforeunload', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (myActive) { e.preventDefault(); e.returnValue = ''; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Save name (creates/merges your doc)</p>
<p class="p1"><span class="Apple-converted-space">    </span>saveNameBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const name = nameInput.value.trim();</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!name) { alert('Please enter a name'); return; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!uid) { alert('Still signing in… try again.'); return; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>await setDoc(myDocRef, { name, active: false, updatedAt: serverTimestamp() }, { merge: true });</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Toggle status</p>
<p class="p1"><span class="Apple-converted-space">    </span>statusToggle.addEventListener('change', async (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!uid) { alert('Still signing in… try again.'); e.target.checked = !e.target.checked; return; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>myActive = !!e.target.checked;</p>
<p class="p1"><span class="Apple-converted-space">      </span>await updateDoc(myDocRef, { active: myActive, updatedAt: serverTimestamp() });</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Roster listener</p>
<p class="p1"><span class="Apple-converted-space">    </span>const rosterQuery = query(collection(db, 'users'), orderBy('name'));</p>
<p class="p1"><span class="Apple-converted-space">    </span>onSnapshot(rosterQuery, (snap) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>rosterBody.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>snap.forEach(docSnap =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const d = docSnap.data() || {};</p>
<p class="p1"><span class="Apple-converted-space">        </span>const name = (d.name || '(unnamed)').toString();</p>
<p class="p1"><span class="Apple-converted-space">        </span>const active = !!d.active;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const updated = d.updatedAt?.toDate ? d.updatedAt.toDate() : null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const tr = document.createElement('tr');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tdName = document.createElement('td');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tdStatus = document.createElement('td');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tdUpdated = document.createElement('td');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>tdName.textContent = name;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const pill = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">        </span>pill.className = 'pill';</p>
<p class="p1"><span class="Apple-converted-space">        </span>const dot = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">        </span>dot.className = 'dot ' + (active ? 'on' : 'off');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const text = document.createElement('span');</p>
<p class="p1"><span class="Apple-converted-space">        </span>text.className = 'status';</p>
<p class="p1"><span class="Apple-converted-space">        </span>text.textContent = active ? 'Logged In' : 'Logged Out';</p>
<p class="p1"><span class="Apple-converted-space">        </span>pill.appendChild(dot); pill.appendChild(text);</p>
<p class="p1"><span class="Apple-converted-space">        </span>tdStatus.appendChild(pill);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>tdUpdated.textContent = updated ? updated.toLocaleString() : '—';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>tr.appendChild(tdName); tr.appendChild(tdStatus); tr.appendChild(tdUpdated);</p>
<p class="p1"><span class="Apple-converted-space">        </span>rosterBody.appendChild(tr);</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Anonymous auth + your personal doc</p>
<p class="p1"><span class="Apple-converted-space">    </span>signInAnonymously(auth).catch(console.error);</p>
<p class="p1"><span class="Apple-converted-space">    </span>onAuthStateChanged(auth, async (user) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!user) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>uid = user.uid;</p>
<p class="p1"><span class="Apple-converted-space">      </span>myDocRef = doc(db, 'users', uid);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const snap = await getDoc(myDocRef);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!snap.exists()) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>await setDoc(myDocRef, { name: '', active: false, updatedAt: serverTimestamp() }, { merge: true });</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setUIFromDoc(snap.data());</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>onSnapshot(myDocRef, s =&gt; setUIFromDoc(s.data()));</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
